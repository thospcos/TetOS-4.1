<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Machine Love</title>

<style>
    html, body {
        margin:0; padding:0;
        width:100%; height:100%;
        background:black; color:white;
        overflow:hidden;
        font-family:Georgia, serif;
    }

    #startScreen {
        position:absolute;
        top:0; left:0;
        width:100%; height:100%;
        background:black;
        display:flex;
        justify-content:center;
        align-items:center;
        font-size:40px;
        cursor:pointer;
        z-index:9999;
    }

    #screen {
        position:absolute;
        top:0; left:0;
        width:100%; height:100%;
        background:black;
        opacity:1;
        transition:opacity .45s ease;
    }

    #textBox {
        position:absolute;
        top:50%; left:50%;
        width:900px; height:140px;
        margin-left:-450px; margin-top:-70px;
        font-size:42px;
        text-align:center;
        white-space:pre-line;
        opacity:1;
        transition:opacity .45s ease;
    }

    .word, .bySmall, .artistWord, .feat {
        display:inline-block;
        opacity:1;        /* NO FADES */
        transition:none;  /* REMOVE ALL FADE ANIMATION */
    }

    .word { font-size:110px; margin-right:18px; }
    .bySmall { font-size:28px; margin-right:12px; }
    .artistWord { font-size:64px; margin-left:6px; }
    .feat { font-size:28px; display:block; margin-top:18px; }
</style>
</head>

<body>

<!-- CLICK TO START -->
<div id="startScreen">Click To Start</div>

<audio id="bgm" src="machine_love.mp3.mp3" loop></audio>

<div id="screen"></div>
<div id="textBox">koi o shite.</div>

<script>
// ELEMENTS
const startScreen = document.getElementById("startScreen");
const bgm = document.getElementById("bgm");
const screen = document.getElementById("screen");
const textBox = document.getElementById("textBox");

// CLICK → ENABLE SOUND + START SEQUENCE
startScreen.onclick = () => {
    startScreen.style.display = "none";
    bgm.play().catch(()=>{});
    startSequence();
};

// HELPERS
function setText(t){ textBox.innerText = t; }
function fadeOutAll(callback){
    screen.style.opacity = 0;
    textBox.style.opacity = 0;
    setTimeout(()=>callback && callback(), 600);
}
function fadeInAll(callback){
    screen.style.opacity = 1;
    textBox.style.opacity = 1;
    setTimeout(()=>callback && callback(), 600);
}

// FINAL WHITE SCREEN (NO FADES)
function showFinalWhite() {
    screen.style.transition = "none";
    textBox.style.transition = "none";

    screen.style.background = "white";
    screen.style.opacity = 1;

    textBox.style.color = "black";
    textBox.innerHTML = "";
    textBox.style.opacity = 1;

    // CREATE ELEMENTS
    const line1 = document.createElement("div");
    const span1 = document.createElement("span");
    span1.className = "word";
    span1.textContent = "Machine";

    const span2 = document.createElement("span");
    span2.className = "word";
    span2.textContent = "Love";

    line1.appendChild(span1);
    line1.appendChild(span2);

    const line2 = document.createElement("div");
    const by = document.createElement("span");
    by.className = "bySmall";
    by.textContent = "by";

    const jamie = document.createElement("span");
    jamie.className = "artistWord";
    jamie.textContent = "Jamie";

    const paige = document.createElement("span");
    paige.className = "artistWord";
    paige.textContent = "Paige";

    line2.appendChild(by);
    line2.appendChild(jamie);
    line2.appendChild(paige);

    const feat = document.createElement("div");
    feat.className = "feat";
    feat.textContent = "featuring Kasane Teto SV";

    textBox.appendChild(line1);
    textBox.appendChild(line2);
    textBox.appendChild(feat);

    // POP IN (NO FADE)
    setTimeout(()=>{ span1.style.display = "inline-block"; }, 100);
    setTimeout(()=>{ span2.style.display = "inline-block"; }, 300);
    setTimeout(()=>{ by.style.display = "inline-block"; }, 500);
    setTimeout(()=>{ jamie.style.display = "inline-block"; }, 700);
    setTimeout(()=>{ paige.style.display = "inline-block"; }, 900);
    setTimeout(()=>{ feat.style.display = "block"; }, 1100);
}

// TIMELINE (STARTS AFTER CLICK)
function startSequence() {
    setTimeout(()=>{
        fadeOutAll(()=>{
            setText("This song is a tribute to\n耳のあるロボットの唄\n(Song of the Eared Robot)\nby nwp8861.");
            fadeInAll();
        });
    }, 21000);

    setTimeout(()=>{
        fadeOutAll(()=>{
            setText("It is about the truths that lay\nin hiding within artifice,\nand a computer falling in love.");
            fadeInAll();
        });
    }, 27000);

    setTimeout(()=>{
        fadeOutAll(()=>{
            showFinalWhite();
        });
    }, 31000);
}
</script>

</body>
</html>
